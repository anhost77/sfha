# Configuration sfha - Exemple
# Copiez ce fichier vers /etc/sfha/config.yml et adaptez-le

cluster:
  name: mon-cluster
  quorum_required: true
  failover_delay_ms: 3000
  poll_interval_ms: 2000

node:
  name: node1
  priority: 100

vips:
  - name: vip-main
    ip: 192.168.1.100
    cidr: 24
    interface: eth0

services:
  - name: nginx
    type: systemd
    unit: nginx
    critical: true
    restart_service: true
    healthcheck:
      type: http
      target: "http://127.0.0.1/"
      interval_ms: 5000
      timeout_ms: 2000
      failures_before_unhealthy: 3
      successes_before_healthy: 2

constraints:
  - type: colocation
    resource: nginx
    with: vip-main
  - type: order
    first: vip-main
    then: nginx

# stonith:
#   enabled: true
#   provider: proxmox
#   proxmox:
#     api_url: https://proxmox:8006
#     token_id: root@pam!sfha
#     token_secret: your-token-secret
#     verify_ssl: false
#     pve_node: pve01
